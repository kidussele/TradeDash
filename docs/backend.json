
{
  "entities": {
    "UserProfile": {
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user's profile information.",
      "properties": {
        "email": { "type": "string", "format": "email" },
        "displayName": { "type": "string" },
        "photoURL": { "type": "string", "format": "uri" },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["email", "createdAt"]
    },
    "JournalEntry": {
        "title": "JournalEntry",
        "type": "object",
        "description": "A single entry in the user's trading journal.",
        "properties": {
            "id": { "type": "string" },
            "date": { "type": "string", "format": "date-time" },
            "session": { "type": "string", "enum": ["London", "New York", "Tokyo", "Sydney"] },
            "currencyPair": { "type": "string" },
            "direction": { "type": "string", "enum": ["Long", "Short"] },
            "entryPrice": { "type": "number" },
            "stopLoss": { "type": "number" },
            "takeProfit": { "type": "number" },
            "positionSize": { "type": "number" },
            "entryTime": { "type": "string", "format": "date-time" },
            "exitTime": { "type": "string", "format": "date-time" },
            "pnl": { "type": "number" },
            "rMultiple": { "type": "number" },
            "result": { "type": "string", "enum": ["Win", "Loss", "Breakeven", "Ongoing"] },
            "notes": { "type": "string" },
            "screenshotBefore": { "type": "string", "format": "uri" },
            "screenshotAfter": { "type": "string", "format": "uri" },
            "adherenceToPlan": { "type": "string", "enum": ["Yes", "No", "Partial"] },
            "emotion": { "type": "string", "enum": ["Greedy", "Fearful", "Confident", "Neutral", "Anxious", "Patient"] },
            "strategyId": { "type": "string" },
            "strategyTitle": { "type": "string" }
        },
        "required": ["id", "date", "currencyPair", "direction", "entryPrice", "stopLoss", "takeProfit", "positionSize", "result", "notes", "adherenceToPlan"]
    },
    "BacktestJournalEntry": {
        "title": "BacktestJournalEntry",
        "type": "object",
        "description": "A single entry in the user's backtest journal.",
        "properties": {
            "id": { "type": "string" },
            "date": { "type": "string", "format": "date-time" },
            "session": { "type": "string", "enum": ["London", "New York", "Tokyo", "Sydney"] },
            "currencyPair": { "type": "string" },
            "direction": { "type": "string", "enum": ["Long", "Short"] },
            "entryPrice": { "type": "number" },
            "stopLoss": { "type": "number" },
            "takeProfit": { "type": "number" },
            "positionSize": { "type": "number" },
            "entryTime": { "type": "string", "format": "date-time" },
            "exitTime": { "type": "string", "format": "date-time" },
            "pnl": { "type": "number" },
            "rMultiple": { "type": "number" },
            "result": { "type": "string", "enum": ["Win", "Loss", "Breakeven", "Ongoing"] },
            "notes": { "type": "string" },
            "screenshotBefore": { "type": "string", "format": "uri" },
            "screenshotAfter": { "type": "string", "format": "uri" },
            "adherenceToPlan": { "type": "string", "enum": ["Yes", "No", "Partial"] },
            "strategyId": { "type": "string" },
            "strategyTitle": { "type": "string" }
        },
        "required": ["id", "date", "currencyPair", "direction", "entryPrice", "stopLoss", "takeProfit", "positionSize", "result", "notes", "adherenceToPlan"]
    },
    "Goal": {
        "title": "Goal",
        "type": "object",
        "description": "A user's personal or trading goal.",
        "properties": {
            "id": { "type": "string" },
            "period": { "type": "string", "enum": ["Monthly", "Quarterly", "Half Year", "Yearly", "Big Goal"] },
            "title": { "type": "string" },
            "description": { "type": "string" },
            "imageUrl": { "type": "string", "format": "uri" },
            "linkUrl": { "type": "string", "format": "uri" },
            "imageHint": { "type": "string" },
            "status": { "type": "string", "enum": ["In Progress", "Completed"] }
        },
        "required": ["id", "period", "title", "description", "imageUrl", "status"]
    },
    "Note": {
        "title": "Note",
        "type": "object",
        "description": "A note in the user's market analysis or self-development notebook.",
        "properties": {
            "id": { "type": "string" },
            "title": { "type": "string" },
            "content": { "type": "string" },
            "createdAt": { "type": "string", "format": "date-time" },
            "currencyPair": { "type": "string" },
            "imageUrl": { "type": "string", "format": "uri" },
            "linkUrl": { "type": "string", "format": "uri" }
        },
        "required": ["id", "title", "content", "createdAt"]
    },
    "Checklist": {
        "title": "Checklist",
        "type": "object",
        "description": "A single strategy checklist.",
        "properties": {
            "id": { "type": "string" },
            "title": { "type": "string" },
            "description": { "type": "string" },
            "narrative": { "type": "string", "enum": ["Bullish", "Bearish"] },
            "items": { 
                "type": "array",
                "items": {
                    "type": "object",
                    "properties": {
                        "id": { "type": "string" },
                        "text": { "type": "string" },
                        "description": { "type": "string" },
                        "isChecked": { "type": "boolean" }
                    },
                    "required": ["id", "text", "isChecked"]
                }
            },
            "useCount": { "type": "number", "description": "How many times this checklist has been completed." }
        },
        "required": ["id", "title", "items", "narrative"]
    },
    "UserStatus": {
      "title": "UserStatus",
      "type": "object",
      "description": "Tracks a user's online status.",
      "properties": {
        "online": { "type": "boolean" },
        "lastChanged": { "type": "string", "format": "date-time" }
      },
      "required": ["online", "lastChanged"]
    },
    "ChatRoom": {
      "title": "ChatRoom",
      "type": "object",
      "description": "Represents a chat room between two or more users.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "type": { "type": "string", "enum": ["group", "private"] },
        "members": { "type": "array", "items": { "type": "string" } },
        "lastMessage": {
          "type": "object",
          "properties": {
            "text": { "type": "string" },
            "timestamp": { "type": "string", "format": "date-time" },
            "senderId": { "type": "string" }
          }
        }
      },
      "required": ["id", "name", "type", "members"]
    },
    "ChatMessage": {
      "title": "ChatMessage",
      "type": "object",
      "description": "A single message within a chat room.",
      "properties": {
        "id": { "type": "string" },
        "text": { "type": "string" },
        "senderId": { "type": "string" },
        "timestamp": { "type": "string", "format": "date-time" },
        "members": { "type": "array", "items": { "type": "string" } },
        "imageUrl": { "type": "string", "format": "uri" },
        "replyTo": {
            "type": "object",
            "properties": {
                "messageId": { "type": "string" },
                "senderId": { "type": "string" },
                "text": { "type": "string" }
            }
        }
      },
      "required": ["id", "senderId", "timestamp", "members"]
    },
    "BookResource": {
      "title": "BookResource",
      "type": "object",
      "description": "A user-saved book resource.",
      "properties": {
        "id": { "type": "string" },
        "title": { "type": "string" },
        "author": { "type": "string" },
        "description": { "type": "string" },
        "bookUrl": { "type": "string", "format": "uri" },
        "coverImageUrl": { "type": "string", "format": "uri" },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "title", "author", "bookUrl", "coverImageUrl", "createdAt"]
    }
  },
  "auth": {
    "providers": ["password", "anonymous"]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/UserProfile" },
      "description": "Stores public information about a user."
    },
    "/users/{userId}/journalEntries/{entryId}": {
        "schema": { "$ref": "#/entities/JournalEntry" },
        "description": "User's live trading journal entries."
    },
    "/users/{userId}/backtestJournalEntries/{entryId}": {
        "schema": { "$ref": "#/entities/BacktestJournalEntry" },
        "description": "User's backtest trading journal entries."
    },
    "/users/{userId}/goals/{goalId}": {
        "schema": { "$ref": "#/entities/Goal" },
        "description": "User's motivational goals."
    },
    "/users/{userId}/notebookNotes/{noteId}": {
        "schema": { "$ref": "#/entities/Note" },
        "description": "User's market analysis notes."
    },
    "/users/{userId}/selfDevelopmentNotes/{noteId}": {
        "schema": { "$ref": "#/entities/Note" },
        "description": "User's self-development notes."
    },
    "/users/{userId}/strategyChecklists/{checklistId}": {
        "schema": { "$ref": "#/entities/Checklist" },
        "description": "User's trading strategy checklists."
    },
    "/userStatus/{userId}": {
      "schema": { "$ref": "#/entities/UserStatus" },
      "description": "Real-time status of a user."
    },
    "/chatRooms/{roomId}": {
      "schema": { "$ref": "#/entities/ChatRoom" },
      "description": "A chat room's metadata."
    },
    "/chatRooms/{roomId}/messages/{messageId}": {
      "schema": { "$ref": "#/entities/ChatMessage" },
      "description": "Messages within a specific chat room."
    },
    "/users/{userId}/bookResources/{bookId}": {
        "schema": { "$ref": "#/entities/BookResource" },
        "description": "User's saved book resources."
    }
  }
}
